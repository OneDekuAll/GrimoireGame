{% extends "base.html" %}

{% block title %}Grimoire Configuration - GrimoireGame{% endblock %}

{% block extra_css %}
.tabs {
    display: flex;
    gap: 0;
    margin-bottom: 2rem;
}

.tab {
    flex: 1;
    padding: 1rem;
    background: #1a0f3e;
    border: 2px solid #d4af37;
    color: #d4af37;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 1.1rem;
}

.tab:first-child {
    border-radius: 8px 0 0 0;
}

.tab:last-child {
    border-radius: 0 8px 0 0;
}

.tab.active {
    background: linear-gradient(135deg, #b8860b 0%, #d4af37 100%);
    color: #1a0f3e;
}

.tab:hover:not(.active) {
    background: #2a1f5e;
}

.settings-content {
    background: linear-gradient(135deg, #1a0f3e 0%, #0f0a2e 100%);
    border: 3px solid #d4af37;
    border-radius: 0 0 12px 12px;
    padding: 3rem;
}

.section-heading {
    color: #d4af37;
    font-size: 2rem;
    margin-bottom: 2rem;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    margin-bottom: 1rem;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
    border-left: 4px solid #d4af37;
}

.setting-info h3 {
    color: #d4af37;
    margin-bottom: 0.5rem;
    font-size: 1.2rem;
}

.setting-info p {
    color: #b8860b;
    font-size: 0.9rem;
}

.toggle {
    position: relative;
    width: 60px;
    height: 30px;
    background: #2a1810;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s;
}

.toggle.active {
    background: linear-gradient(135deg, #b8860b 0%, #d4af37 100%);
}

.toggle-knob {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 24px;
    height: 24px;
    background: white;
    border-radius: 50%;
    transition: all 0.3s;
}

.toggle.active .toggle-knob {
    left: 33px;
}

.slider-container {
    width: 100%;
}

.slider {
    width: 100%;
    height: 8px;
    background: #2a1810;
    border-radius: 4px;
    outline: none;
    -webkit-appearance: none;
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: #d4af37;
    border-radius: 50%;
    cursor: pointer;
}

.slider-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 0.5rem;
    color: #b8860b;
    font-size: 0.9rem;
}

.slider-value {
    text-align: center;
    color: #d4af37;
    margin-top: 0.5rem;
    font-size: 1.1rem;
}

.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    background: rgba(0, 0, 0, 0.3);
}
{% endblock %}

{% block content %}
<div class="top-bar">
    <button class="btn" onclick="location.href='/'">üè†</button>
    <h1 style="color: #d4af37; font-size: 2rem;">‚öôÔ∏è Grimoire Configuration</h1>
    <div></div>
</div>

<div class="container">
    <div class="tabs">
        <div class="tab active" onclick="switchTab('gameplay')">üéÆ Gameplay</div>
        <div class="tab" onclick="switchTab('audio')">üîä Audio</div>
        <div class="tab" onclick="switchTab('display')">üëÅÔ∏è Display</div>
        <div class="tab" onclick="switchTab('about')">‚ÑπÔ∏è About</div>
    </div>
    
    <div class="settings-content">
        <h2 class="section-heading">Gameplay Enchantments</h2>
        
        <div class="setting-item">
            <div class="setting-info" style="flex: 1; margin-right: 2rem;">
                <h3>üìú Hint Frequency</h3>
                <div class="slider-container" style="margin-top: 1rem;">
                    <input type="range" min="0" max="100" value="{{ settings.hint_frequency }}" 
                           class="slider" id="hintSlider" 
                           oninput="updateSlider(this.value)">
                    <div class="slider-labels">
                        <span>Rare</span>
                        <span>Abundant</span>
                    </div>
                    <div class="slider-value" id="sliderValue">Medium</div>
                </div>
            </div>
        </div>
        
        <div class="setting-item">
            <div class="setting-info">
                <h3>‚ú® Auto-Hints</h3>
                <p>Receive hints automatically when stuck</p>
            </div>
            <div class="toggle {% if settings.auto_hints %}active{% endif %}" 
                 onclick="toggleSetting(this, 'auto_hints')">
                <div class="toggle-knob"></div>
            </div>
        </div>
        
        <div class="setting-item">
            <div class="setting-info">
                <h3>üíé Smart Hints</h3>
                <p>Contextual hints based on your progress</p>
            </div>
            <div class="toggle {% if settings.smart_hints %}active{% endif %}" 
                 onclick="toggleSetting(this, 'smart_hints')">
                <div class="toggle-knob"></div>
            </div>
        </div>
        
        <div class="setting-item">
            <div class="setting-info">
                <h3>üìú Community Tips</h3>
                <p>Show tips from other adventurers</p>
            </div>
            <div class="toggle {% if settings.community_tips %}active{% endif %}" 
                 onclick="toggleSetting(this, 'community_tips')">
                <div class="toggle-knob"></div>
            </div>
        </div>
    </div>
</div>

<script>
function switchTab(tab) {
    // Placeholder for tab switching
    alert('Tab switching to: ' + tab);
}

function updateSlider(value) {
    const labels = ['Rare', 'Medium', 'Abundant'];
    let label = 'Medium';
    if (value < 33) label = 'Rare';
    else if (value > 66) label = 'Abundant';
    
    document.getElementById('sliderValue').textContent = label;
    
    fetch('/api/settings', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ hint_frequency: parseInt(value) })
    });
}

function toggleSetting(element, setting) {
    element.classList.toggle('active');
    const isActive = element.classList.contains('active');
    
    fetch('/api/settings', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ [setting]: isActive })
    });
}
</script>
{% endblock %}